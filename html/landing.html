<!DOCTYPE html>
<html>

<head>
    <title>Headline Filter</title>
    <meta name="description" content="The news that matters to you." />
</head>


<style>
    input[id="search"] {
        width: 200px;
        height: 50px;
    }
</style>


<body>
    <main>

        <header>
            <h1>
                Headline Filter
            </h1>
            <h2>
                News you asked for. No algorithm. No Ads.
            </h2>
        </header>

        <section id="search-section">
            <form method="get">
                <label for="search">Search</label>
                <input id="search" name="search" type="text" list="search-suggestions" autocomplete="off" placeholder=""
                    value="$SEARCH"></input>

                <datalist id="search-suggestions">
                    <option value="Movie box office record"></option>
                    <option value="The start of World War III"></option>
                    <option value="Only uplifting animal stories"></option>
                    <option value="No politics"></option>
                    <option value="No pop-science clickbait"></option>
                    <option value="UFOs, Bigfoot, Sea Monsters"></option>
                    <option value="Solved mystery"></option>
                    <option value="Feel-good sports moments"></option>
                </datalist>
                <button type="submit">
                    Search
                </button>
            </form>
        </section>

        <h5 hidden>
            Found <span id="found-count">0</span> out of <span id="article-count">0</span> articles
        </h5>
        <section id="results">


            <script>
                // script needs to be placed here so it is executed after results section is loaded in the DOM
                const observer = new MutationObserver((mutations) => {
                    const articleCount = document.getElementById("article-count");
                    const foundCount = document.getElementById("found-count");
                    for (const mutation of mutations) {
                        for (const node of mutation.addedNodes) {
                            if (node.nodeType === node.ELEMENT_NODE && node.dataset && node.dataset["articleCount"]) {
                                foundCount.parentElement.hidden = false;
                                articleCount.textContent = node.dataset["articleCount"];
                                foundCount.textContent = node.dataset["foundCount"];
                            }
                        }
                    }
                });

                observer.observe(document.getElementById("results"), {
                    childList: true,
                    subtree: true,
                });

            </script>

            <ol id="news-articles">



                $NEWS_ARTICLES
            </ol>
        </section>

    </main>
</body>

</html>