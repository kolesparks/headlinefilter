<!DOCTYPE html>
<html>

<head>
    <title>Headline Filter</title>
    <meta charset="UTF-8">
    <meta name="description" content="$META_DESCRIPTION" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&display=swap"
        rel="stylesheet">

</head>


<script>
    class KSFormattedTime extends HTMLElement {
        static observedAttributes = ["color", "size"];

        constructor() {
            super();

            requestAnimationFrame(() => {
                const time = this.children.item(0);
                time.textContent = new Date(time.textContent.trim()).toLocaleString();
            });
        }

    }

    customElements.define("ks-formatted-time", KSFormattedTime);
</script>


<style>
    html {
        font-family: "Google Sans", sans-serif;
        font-optical-sizing: auto;
        font-style: normal;
        font-variation-settings:
            "GRAD" 0;
        overflow: hidden;
        max-height: 100%;
        height: 100%;
    }

    body {
        overflow: hidden;
        max-height: 100%;
        height: 100%;
    }

    main {
        overflow: hidden;
        max-height: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
    }


    header {
        display: flex;
        flex-direction: column;
        width: 100%;
        align-items: center;
        row-gap: 0px;
        margin-bottom: 1em;
        text-align: center;
    }

    .hero {
        display: flex;
        flex-direction: column;
        align-items: center;
        row-gap: 0px;
    }

    .hero h1 {
        margin: 0.25em;
    }

    .hero h3 {
        margin: 0.25em;
    }

    footer {
        position: fixed;
        display: flex;
        flex-direction: column;
        align-items: center;
        bottom: 0;
        left: 0;
        right: 0;
        text-align: center;
        padding-bottom: 1em;
    }

    footer p {
        position: relative;
        font-size: 0.8em;
        opacity: 0.84;
        margin: 0.25em;
    }

    form {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 0.5em;
        margin-bottom: 1em;
    }


    form input {
        width: 80%;
        max-width: 600px;
        height: 40px;
        margin: 0px;
        border-radius: 5px;
        border: none;
        font-size: 20px;
        padding-left: 0.5em;
    }

    form button {
        height: 40px;
        width: 40px;
        border-radius: 5px;
        border: none;
        background-color: transparent;
        cursor: pointer;
    }

    #results {
        display: flex;
        overflow: auto;
        flex-direction: column;
        align-items: center;
        margin-bottom: 2em;
    }

    h5 {
        margin: 0.25em;
    }

    ol {
        padding: 0px;
        margin: 0px;
    }

    li {
        border-width: 1px;
        border-style: solid;
        border-color: #BCCCDC;
        border-radius: 5px;
        margin-bottom: 1em;
        padding: 0.75em;
        list-style: none;
    }

    li:last-child {
        margin-bottom: 2.5em;
    }

    a:visited {
        color: #356499;
        text-decoration: wavy;
    }

    a {
        color: #437cbe;
    }


    .header-link {
        text-decoration: none;
        color: inherit;
    }


    @media (prefers-color-scheme: light) {

        body {
            background-color: #F8FAFC;
            color: #222831;
        }

        form input {
            background-color: #D9EAFD;
            color: #222831;
        }

        form button {
            background-color: #D9EAFD;
        }

        form button:hover {
            background-color: #c6d5e6;
        }

        footer {
            background-color: #D9EAFD;
        }

        a:visited {
            color: #356499;
            text-decoration: wavy;
        }

        a {
            color: #437cbe;
        }

    }


    @media (prefers-color-scheme: dark) {

        body {
            background-color: #222831;
            color: #EEEEEE;
        }

        form input {
            background-color: #31363F;
            color: #EEEEEE;
        }

        form button {
            background-color: #31363F;
        }

        form button:hover {
            background-color: #3d434e;
        }

        footer {
            background: #31363F;
        }

        a:visited {
            color: #76ABAE;
        }

        a {
            color: #87c3c6;
        }

        li {
            background-color: #31363F;
            border: none;
        }
    }
</style>


<body>
    <main>

        <header>
            <div class="hero">
                <a href="/" class="header-link">
                    <h1>
                        Headline Filter
                    </h1>
                </a>
                <h3>
                    News you ask for. No algorithm. No ads.
                </h3>
            </div>
        </header>

        <footer>
            <p>
                Hand crafted by <a href="https://kolesparks.com" target="_blank" rel="noreferrer">Kole Sparks</a>. Open
                Source on <a href="https://github.com/kolesparks/headlinefilter" target="_blank"
                    rel="noreferrer">GitHub</a>. Hosted on <a href="https://railway.com?referralCode=ABSfL6"
                    rel="noreferrer">Railway</a>.
            </p>
        </footer>

        <section id="search-section">
            <form method="get">
                <input id="search" name="search" type="text" list="search-suggestions" autocomplete="off"
                    placeholder="Search anything" value="$SEARCH"></input>
                <button type="submit">
                    üîç
                </button>

                <datalist id="search-suggestions">
                    <option value="Movie box office record"></option>
                    <option value="The start of World War III"></option>
                    <option value="Only uplifting animal stories"></option>
                    <option value="No politics"></option>
                    <option value="No pop-science clickbait"></option>
                    <option value="UFOs, Bigfoot, Sea Monsters"></option>
                    <option value="Solved mystery"></option>
                    <option value="Feel-good sports moments"></option>
                </datalist>
            </form>
        </section>


        <section id="results">

            <h5 hidden>
                Found <span id="found-count">0</span> out of <span id="article-count">0</span> articles
            </h5>
            <script>
                // script needs to be placed here so it is executed after results section is loaded in the DOM
                const observer = new MutationObserver((mutations) => {
                    const articleCount = document.getElementById("article-count");
                    const foundCount = document.getElementById("found-count");
                    for (const mutation of mutations) {
                        for (const node of mutation.addedNodes) {
                            if (node.nodeType === node.ELEMENT_NODE && node.dataset && node.dataset["articleCount"]) {
                                foundCount.parentElement.hidden = false;
                                articleCount.textContent = node.dataset["articleCount"];
                                foundCount.textContent = node.dataset["foundCount"];
                                node.remove();
                            }
                        }
                    }
                });

                observer.observe(document.getElementById("results"), {
                    childList: true,
                    subtree: true,
                });

            </script>

            <ol id="news-articles">
                $NEWS_ARTICLES
            </ol>
        </section>

    </main>
</body>

</html>